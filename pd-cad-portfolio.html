<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PD CAD’s Portfolio | Prabin Dhital</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Model Viewer -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <!-- Site CSS -->
  <link rel="stylesheet" href="static/style.css">
  <style>
    .model-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 400px;
      background: #f8f9fa;
      color: #6c757d;
      font-style: italic;
    }
    .cad-container {
      max-width: 600px;
      margin: 2rem auto;
    }
  </style>
</head>
<body class="d-flex flex-column min-vh-100" data-bs-spy="scroll" data-bs-target="#navCollapse" data-bs-offset="100">

  <!-- NAVBAR -->
  <header>
    <nav class="navbar navbar-expand-md navbar-light bg-white shadow-sm sticky-top">
      <div class="container">
        <a class="navbar-brand fw-bold" href="index.html#home">Prabin Dhital’s Portfolio</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navCollapse">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navCollapse">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="index.html#home">HOME</a></li>
            <li class="nav-item"><a class="nav-link" href="pd-engghub.html">PD-EnggHub</a></li>
            <li class="nav-item"><a class="nav-link active" href="pd-cad-portfolio.html">PD CAD’s Portfolio</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <!-- MAIN CONTENT -->
  <main class="cad-container flex-fill mt-4">
    <h2>PD CAD’s Portfolio</h2>
    <p>Welcome PD’s CAD Portfolio</p>

    <!-- Single CAD Model Viewer -->
    <model-viewer 
      src="static/sweep.stp" 
      camera-controls 
      auto-rotate 
      interaction-prompt="hover"
      style="width:100%; height:400px; background:#eee;">
      <div class="model-placeholder">Model file not found: sweep.stp</div>
    </model-viewer>
  </main>

  <!-- FOOTER -->
  <footer class="text-center py-4 mt-auto">
    <small>&copy; 2025 Prabin Dhital</small>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Scripts -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const samples = [
        { title: 'Axial Load Bracket',   desc: '3D assembly showing bracket under axial load, with exploded view.' },
        { title: 'Fatigue Test Fixture', desc: 'Detailed drawing of fatigue test fixture used in MTS machine.' },
        { title: 'Suspension Bushing',   desc: 'Parametric model of suspension bushing with section views.' }
      ];
      const grid = document.getElementById('cad-grid');

      for (let i = 1; i <= 100; i++) {
        const sample = samples[(i - 1) % samples.length];
        const filePath = `static/cad-example${i}.stp`;

        const col = document.createElement('div');
        col.className = 'col-md-4';

        const card = document.createElement('div');
        card.className = 'card shadow-sm h-100';

        // Check file availability before loading
        fetch(filePath, { method: 'HEAD' })
          .then(response => {
            if (response.ok) {
              const modelViewer = document.createElement('model-viewer');
              modelViewer.setAttribute('src', filePath);
              modelViewer.setAttribute('camera-controls', '');
              modelViewer.setAttribute('auto-rotate', '');
              modelViewer.setAttribute('interaction-prompt', 'hover');
              modelViewer.setAttribute('style', 'width:100%; height:180px; background:#eee;');
              card.appendChild(modelViewer);
            } else {
              const placeholder = document.createElement('div');
              placeholder.className = 'model-placeholder';
              placeholder.textContent = `Model file not found: cad-example${i}.stp`;
              card.appendChild(placeholder);
            }

            const body = document.createElement('div');
            body.className = 'card-body';

            const title = document.createElement('h5');
            title.className = 'card-title';
            title.textContent = sample.title;

            const text = document.createElement('p');
            text.className = 'card-text';
            text.textContent = sample.desc;

            body.append(title, text);
            card.append(body);
            col.append(card);
            grid.append(col);
          })
          .catch(() => {
            const placeholder = document.createElement('div');
            placeholder.className = 'model-placeholder';
            placeholder.textContent = `Error loading: cad-example${i}.stp`;
            card.appendChild(placeholder);

            const body = document.createElement('div');
            body.className = 'card-body';
            const title = document.createElement('h5');
            title.className = 'card-title';
            title.textContent = sample.title;
            const text = document.createElement('p');
            text.className = 'card-text';
            text.textContent = sample.desc;
            body.append(title, text);
            card.append(body);
            col.append(card);
            grid.append(col);
          });
      }
    });
  </script>
</body>
</html>
